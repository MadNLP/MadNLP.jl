<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>IPM solver · MadNLP.jl</title><meta name="title" content="IPM solver · MadNLP.jl"/><meta property="og:title" content="IPM solver · MadNLP.jl"/><meta property="twitter:title" content="IPM solver · MadNLP.jl"/><meta name="description" content="Documentation for MadNLP.jl."/><meta property="og:description" content="Documentation for MadNLP.jl."/><meta property="twitter:description" content="Documentation for MadNLP.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="MadNLP.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">MadNLP.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../installation/">Installation</a></li><li><a class="tocitem" href="../../quickstart/">Quickstart</a></li><li><a class="tocitem" href="../../options/">Options</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/multiprecision/">Multi-precision</a></li><li><a class="tocitem" href="../../tutorials/warmstart/">Warm-start</a></li><li><a class="tocitem" href="../../tutorials/lbfgs/">LBFGS</a></li></ul></li><li><span class="tocitem">Manual</span><ul><li class="is-active"><a class="tocitem" href>IPM solver</a><ul class="internal"><li><a class="tocitem" href="#What-happens-at-iteration-k?"><span>What happens at iteration k?</span></a></li><li><a class="tocitem" href="#Step-1:-When-the-algorithm-stops?"><span>Step 1: When the algorithm stops?</span></a></li><li><a class="tocitem" href="#Step-2:-How-to-update-the-barrier-parameter-\\mu?"><span>Step 2: How to update the barrier parameter <span>$\mu$</span>?</span></a></li><li><a class="tocitem" href="#Step-4:-How-do-we-solve-the-KKT-system?"><span>Step 4: How do we solve the KKT system?</span></a></li><li><a class="tocitem" href="#Step-5:-How-to-regularize-the-KKT-system?"><span>Step 5: How to regularize the KKT system?</span></a></li><li><a class="tocitem" href="#Step-6:-What-is-a-filter-line-search?"><span>Step 6: What is a filter line-search?</span></a></li></ul></li><li><a class="tocitem" href="../kkt/">KKT systems</a></li><li><a class="tocitem" href="../linear_solvers/">Linear Solvers</a></li></ul></li><li><span class="tocitem">API Reference</span><ul><li><a class="tocitem" href="../../lib/ipm/">IPM solver</a></li><li><a class="tocitem" href="../../lib/callbacks/">Callback wrappers</a></li><li><a class="tocitem" href="../../lib/kkt/">KKT systems</a></li><li><a class="tocitem" href="../../lib/linear_solvers/">Linear Solvers</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>IPM solver</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>IPM solver</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/MadNLP/MadNLP.jl/blob/master/docs/src/man/solver.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><p>MadNLP is an interior-point solver based on a filter line-search. We detail here the inner machinery happening at each MadNLP&#39;s iteration.</p><p>We recall that MadNLP is a primal-dual interior-point method and starts from an initial primal-dual variables <span>$(x_0, s_0, y_0)$</span>.</p><h2 id="What-happens-at-iteration-k?"><a class="docs-heading-anchor" href="#What-happens-at-iteration-k?">What happens at iteration k?</a><a id="What-happens-at-iteration-k?-1"></a><a class="docs-heading-anchor-permalink" href="#What-happens-at-iteration-k?" title="Permalink"></a></h2><p>At iteration <span>$k$</span>, MadNLP aims at finding a new iterate <span>$(x_{k+1}, s_{k+1}, y_{k+1})$</span> improving the current iterate <span>$(x_{k}, s_{k}, y_{k})$</span>, in the sense that the new iterate (i) improves the objective or (ii) decreases the infeasibility. The exact trade-off between (i) and (ii) is handled by the filter line-search.</p><p>The algorithm follows the steps:</p><ol><li>Check problem convergence <span>$E_0(x_k, s_k, y_k) &lt; \varepsilon_{tol}$</span></li><li>If necessary, update the barrier parameter <span>$\mu_k$</span></li><li>Evaluate the Hessian of the Lagrangian <span>$W_k$</span> and the Jacobian <span>$A_k$</span> with the callbacks</li><li>Assemble the KKT system and compute the search direction <span>$d_k$</span> by solving the resulting linear system.</li><li>If necessary, regularize the KKT system to guarantee that <span>$d_k$</span> is a descent direction</li><li>Run the backtracking line-search and find a step <span>$\alpha_k$</span></li><li>Define the next iterate as <span>$x_{k+1} = x_k + \alpha_k d_k^x$</span>, <span>$s_{k+1} = s_k + \alpha_k d_k^s$</span>, <span>$y_{k+1} = y_k + \alpha_k d_k^y$</span>.</li></ol><p>We detail each step in the following paragraphs.</p><div class="admonition is-info" id="Note-fb6684a13482e790"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-fb6684a13482e790" title="Permalink"></a></header><div class="admonition-body"><p>In general, Step 3 (Hessian and Jacobian evaluations) and Step 4 (solving the KKT system) are the two most numerically demanding steps.</p></div></div><h2 id="Step-1:-When-the-algorithm-stops?"><a class="docs-heading-anchor" href="#Step-1:-When-the-algorithm-stops?">Step 1: When the algorithm stops?</a><a id="Step-1:-When-the-algorithm-stops?-1"></a><a class="docs-heading-anchor-permalink" href="#Step-1:-When-the-algorithm-stops?" title="Permalink"></a></h2><p>MadNLP stops once the solution satisfies a specified accuracy <span>$\varepsilon_{tol}$</span> (by default <span>$10^{-8}$</span>). MadNLP uses the same stopping criterion as Ipopt by defining</p><p class="math-container">\[E_\mu(x_k, s_k; y_k, \nu_k, w_k) =
\max \left\{
\begin{aligned}
\| \nabla f(x_k) + A_k^\top y_k + \nu_k + w_k \|_\infty \\
\| g(x_k) - s_k \|_\infty \\
\| X_k\nu_k - \mu e \|_\infty \\
\| S_k w_k - \mu e \|_\infty
\end{aligned}
\right\}
\]</p><p>and stopping the algorithm whenever</p><p class="math-container">\[E_0(x_k, s_k; y_k, \nu_k, w_k) &lt; \varepsilon_{tol}
\]</p><h2 id="Step-2:-How-to-update-the-barrier-parameter-\\mu?"><a class="docs-heading-anchor" href="#Step-2:-How-to-update-the-barrier-parameter-\\mu?">Step 2: How to update the barrier parameter <span>$\mu$</span>?</a><a id="Step-2:-How-to-update-the-barrier-parameter-\\mu?-1"></a><a class="docs-heading-anchor-permalink" href="#Step-2:-How-to-update-the-barrier-parameter-\\mu?" title="Permalink"></a></h2><p>TODO</p><h2 id="Step-4:-How-do-we-solve-the-KKT-system?"><a class="docs-heading-anchor" href="#Step-4:-How-do-we-solve-the-KKT-system?">Step 4: How do we solve the KKT system?</a><a id="Step-4:-How-do-we-solve-the-KKT-system?-1"></a><a class="docs-heading-anchor-permalink" href="#Step-4:-How-do-we-solve-the-KKT-system?" title="Permalink"></a></h2><p>Solving the KKT system happens in two substeps:</p><ol><li>Assembling the KKT matrix <span>$K$</span>.</li><li>Solve the system <span>$Kx = b$</span> with a linear solver.</li></ol><p>In <a href="../kkt/">substep 1</a>, MadNLP reads the Hessian and the Jacobian computed at Step 3 and build the associated KKT system in an <code>AbstractKKTSystem</code>. As a result, we get a matrix <span>$K_k$</span> encoding the KKT system at iteration <span>$k$</span>.</p><p>In <a href="../linear_solvers/">substep 2</a>, the matrix <span>$K_k$</span> is factorized by a compatible linear solver. Then a solution <span>$x$</span> is returned by applying a backsolve.</p><h2 id="Step-5:-How-to-regularize-the-KKT-system?"><a class="docs-heading-anchor" href="#Step-5:-How-to-regularize-the-KKT-system?">Step 5: How to regularize the KKT system?</a><a id="Step-5:-How-to-regularize-the-KKT-system?-1"></a><a class="docs-heading-anchor-permalink" href="#Step-5:-How-to-regularize-the-KKT-system?" title="Permalink"></a></h2><p>TODO</p><h2 id="Step-6:-What-is-a-filter-line-search?"><a class="docs-heading-anchor" href="#Step-6:-What-is-a-filter-line-search?">Step 6: What is a filter line-search?</a><a id="Step-6:-What-is-a-filter-line-search?-1"></a><a class="docs-heading-anchor-permalink" href="#Step-6:-What-is-a-filter-line-search?" title="Permalink"></a></h2><p>TODO</p><h3 id="What-happens-if-the-line-search-failed?"><a class="docs-heading-anchor" href="#What-happens-if-the-line-search-failed?">What happens if the line-search failed?</a><a id="What-happens-if-the-line-search-failed?-1"></a><a class="docs-heading-anchor-permalink" href="#What-happens-if-the-line-search-failed?" title="Permalink"></a></h3><p>If inside the line-search algorithm the step <span>$\alpha_k$</span> becomes negligible (<span>$&lt;10^{-8}$</span>) then we consider the line-search has failed to find a next iterate along the current direction <span>$d_k$</span>. If that happens during several consecutive iterations, MadNLP enters into a feasible restoration phase. The goal of feasible restoration is to decrease the primal infeasibility, to move the current iterate closer to the feasible set.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../tutorials/lbfgs/">« LBFGS</a><a class="docs-footer-nextpage" href="../kkt/">KKT systems »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.11.0 on <span class="colophon-date" title="Friday 9 May 2025 10:07">Friday 9 May 2025</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
